performance.mark("js-parse-end:55694-470f162df43f13cb.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["55694"],{31284(e,n,i){i.d(n,{nB:()=>B,pO:()=>y});var l=i(74848),r=i(84093),s=i(16522),a=i(35148),t=i(58388),o=i(38621),c=i(59134),u=i(26108),d=i(10095),f=i(49305),m=i(34164),_=i(96540),h=i(80844);let E="CodeownersValidationBanner-module__Flash__TSfKS",x="CodeownersValidationBanner-module__Flash_1__QF8oV",N="CodeownersValidationBanner-module__ErrorCodeBlock__E0i9w",j="CodeownersValidationBanner-module__Box__gN1J4",S="CodeownersValidationBanner-module__IconButton__deECG",O="CodeownersValidationBanner-module__Dialog__t75ku",g="CodeownersValidationBanner-module__Box_1__elFSw",C="CodeownersValidationBanner-module__Box_2__Y4FaM",b="CodeownersValidationBanner-module__Box_3__Xb9rR",v="CodeownersValidationBanner-module__Octicon__Hyamu";var w=i(24043);let A=["CODEOWNERS","/CODEOWNERS"],p="ERROR",D="LOADING",R="VALIDATED",B=(0,r.T)()?function(e){let n,i,r,a,t,o,c,u=(0,s.c)(17),{filePath:d,forceRender:f,full:m,refName:E,repo:x}=e;u[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],u[0]=n):n=u[0];let[N,j]=(0,_.useState)(n),[S,O]=(0,_.useState)(D);u[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,w.G7)("codeowners_validation_in_diff"),u[1]=i):i=u[1];let g=i;u[2]!==d?(r=A.includes(d),u[2]=d,u[3]=r):r=u[3];let C=r,b=f||g&&C,v=(0,_.useRef)(!1);return(u[4]!==d||u[5]!==E||u[6]!==x||u[7]!==b?(a=()=>{!b||v.current||(async()=>{v.current=!0;try{let e=await $(x,{name:E},d);if(e.ok){let n=await e.json();j(n.map(W)),O(R)}else O(p)}catch{O(p)}})()},t=[d,E,x,b],u[4]=d,u[5]=E,u[6]=x,u[7]=b,u[8]=a,u[9]=t):(a=u[8],t=u[9]),(0,_.useEffect)(a,t),b)?(u[10]!==m||u[11]!==N||u[12]!==S?(o=(0,l.jsx)(F,{validationErrors:N,validationState:S,full:m}),u[10]=m,u[11]=N,u[12]=S,u[13]=o):o=u[13],u[14]!==o||u[15]!==N?(c=(0,l.jsx)(h.A,{value:N,children:o}),u[14]=o,u[15]=N,u[16]=c):c=u[16],c):null}:function({filePath:e,forceRender:n,full:i,refName:r,repo:s}){let[a,t]=(0,_.useState)([]),[o,c]=(0,_.useState)(D),u=(0,w.G7)("codeowners_validation_in_diff"),d=(0,_.useMemo)(()=>A.includes(e),[e]),f=n||u&&d,m=(0,_.useRef)(!1);return((0,_.useEffect)(()=>{!f||m.current||(async()=>{m.current=!0;try{let n=await $(s,{name:r},e);if(n.ok){let e=await n.json();t(e.map(W)),c(R)}else c(p)}catch{c(p)}})()},[e,r,s,f]),f)?(0,l.jsx)(h.A,{value:a,children:(0,l.jsx)(F,{validationErrors:a,validationState:o,full:i})}):null},F=(0,r.T)()?function(e){let n,i,r,a,t,m,h,N,C,b,v,w=(0,s.c)(27),{full:A,validationErrors:R,validationState:B}=e,[F,V]=(0,_.useState)(!1),W=(0,_.useRef)(null);if(B===p){let e;return w[0]!==A?(e=(0,l.jsx)(c.A,{variant:"warning",className:E,full:A,children:"Failed to validate this CODEOWNERS file"}),w[0]=A,w[1]=e):e=w[1],e}if(B===D){let e;return w[2]!==A?(e=(0,l.jsx)(c.A,{variant:"default",className:E,full:A,children:"Validating CODEOWNERS rules..."}),w[2]=A,w[3]=e):e=w[3],e}if(0===R.length){let e;return w[4]!==A?(e=(0,l.jsx)(c.A,{variant:"success",className:E,full:A,children:"This CODEOWNERS file is valid."}),w[4]=A,w[5]=e):e=w[5],e}return w[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(d.A,{icon:o.BugIcon}),w[6]=n):n=w[6],w[7]!==F?(i=()=>V(!F),w[7]=F,w[8]=i):i=w[8],w[9]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)(u.K,{"aria-label":"View CODEOWNERS errors",tooltipDirection:"s",ref:W,size:"small",icon:o.KebabHorizontalIcon,className:S}),w[9]=r):r=w[9],w[10]!==i?(a=(0,l.jsxs)("div",{onClick:i,className:j,children:["This CODEOWNERS file contains errors",r]}),w[10]=i,w[11]=a):a=w[11],w[12]!==A||w[13]!==a?(t=(0,l.jsxs)(c.A,{variant:"warning",className:x,full:A,children:[n,a]}),w[12]=A,w[13]=a,w[14]=t):t=w[14],w[15]===Symbol.for("react.memo_cache_sentinel")?(m=()=>V(!1),w[15]=m):m=w[15],w[16]===Symbol.for("react.memo_cache_sentinel")?(h=(0,l.jsx)(f.A.Header,{children:"CODEOWNERS errors"}),w[16]=h):h=w[16],w[17]!==R?(N=R.map(T),w[17]=R,w[18]=N):N=w[18],w[19]!==N?(C=(0,l.jsx)("div",{className:g,children:N}),w[19]=N,w[20]=C):C=w[20],w[21]!==F||w[22]!==C?(b=(0,l.jsxs)(f.A,{isOpen:F,onDismiss:m,returnFocusRef:W,className:O,children:[h,C]}),w[21]=F,w[22]=C,w[23]=b):b=w[23],w[24]!==b||w[25]!==t?(v=(0,l.jsxs)(l.Fragment,{children:[t,b]}),w[24]=b,w[25]=t,w[26]=v):v=w[26],v}:function({full:e,validationErrors:n,validationState:i}){let[r,s]=(0,_.useState)(!1),a=(0,_.useRef)(null);return i===p?(0,l.jsx)(c.A,{variant:"warning",className:E,full:e,children:"Failed to validate this CODEOWNERS file"}):i===D?(0,l.jsx)(c.A,{variant:"default",className:E,full:e,children:"Validating CODEOWNERS rules..."}):0===n.length?(0,l.jsx)(c.A,{variant:"success",className:E,full:e,children:"This CODEOWNERS file is valid."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c.A,{variant:"warning",className:x,full:e,children:[(0,l.jsx)(d.A,{icon:o.BugIcon}),(0,l.jsxs)("div",{onClick:()=>s(!r),className:j,children:["This CODEOWNERS file contains errors",(0,l.jsx)(u.K,{"aria-label":"View CODEOWNERS errors",tooltipDirection:"s",ref:a,size:"small",icon:o.KebabHorizontalIcon,className:S})]})]}),(0,l.jsxs)(f.A,{isOpen:r,onDismiss:()=>s(!1),returnFocusRef:a,className:O,children:[(0,l.jsx)(f.A.Header,{children:"CODEOWNERS errors"}),(0,l.jsx)("div",{className:g,children:n.map((e,n)=>(0,l.jsx)(V,{error:e},n))})]})]})};function T(e,n){return(0,l.jsx)(V,{error:e},n)}let V=(0,r.T)()?function(e){let n,i,r,a,t=(0,s.c)(10),{error:o}=e,c=`${o.kind} on line ${o.line}${o.suggestion?`: ${o.suggestion}`:""}`;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.$)(E,N),t[0]=n):n=t[0],t[1]!==o.lineError?(i=(0,l.jsx)("b",{className:b,children:o.lineError}),t[1]=o.lineError,t[2]=i):i=t[2],t[3]!==o.linePrefix||t[4]!==o.lineSuffix||t[5]!==i?(r=(0,l.jsx)("pre",{className:n,children:(0,l.jsxs)("code",{children:[o.linePrefix,i,o.lineSuffix]})}),t[3]=o.linePrefix,t[4]=o.lineSuffix,t[5]=i,t[6]=r):r=t[6],t[7]!==c||t[8]!==r?(a=(0,l.jsxs)("div",{className:C,children:[c,r]}),t[7]=c,t[8]=r,t[9]=a):a=t[9],a}:function({error:e}){return(0,l.jsxs)("div",{className:C,children:[`${e.kind} on line ${e.line}${e.suggestion?`: ${e.suggestion}`:""}`,(0,l.jsx)("pre",{className:(0,m.$)(E,N),children:(0,l.jsxs)("code",{children:[e.linePrefix,(0,l.jsx)("b",{className:b,children:e.lineError}),e.lineSuffix]})})]})};function W(e){var n,i,l;let r=e.source.trim(),s=e.column-1,a=(n=s,i=e.end_column,l=r,i||(l.substring(n).indexOf(" ")>0?l.indexOf(" ",n):l.length));if(s>30){let e=s-30;r="\u2026"+r.slice(e),s-=e-1,a-=e-1}return{...e,linePrefix:r.substring(0,s),lineError:r.substring(s,a),lineSuffix:r.substring(a)}}let y=(0,r.T)()?function(){let e,n=(0,s.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(d.A,{icon:o.DotFillIcon,"aria-label":"This line contains CODEOWNERS errors",className:v}),n[0]=e):e=n[0],e}:function(){return(0,l.jsx)(d.A,{icon:o.DotFillIcon,"aria-label":"This line contains CODEOWNERS errors",className:v})};function $(e,n,i){return(0,t.lS)((0,a.$RX)({owner:e.ownerLogin,repo:e.name,commitish:n.name,filePath:i}),{method:"GET"})}},80844(e,n,i){i.d(n,{A:()=>s,v:()=>a});var l=i(96540);let r=(0,l.createContext)([]);r.displayName="SplitCodeownersErrorsContext";let s=r;function a(){return(0,l.use)(r)}},16968(e,n,i){i.d(n,{Gx:()=>r}),i(74848),i(16522);var l=i(19701);function r(e){return(0,l.Y)(e)?(0,l.t6)(e).map(e=>{let n=l.A0.get(e);return n?`<span class="hidden-unicode-replacement">${n}</span>`:e}).join(""):null}},19701(e,n,i){i.d(n,{A0:()=>a,TA:()=>c,Y:()=>u,_n:()=>d,rE:()=>t,t6:()=>o});let l=/[\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F}/u,r=/[\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F}/gu,s=/([\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F})/gu,a=new Map(Object.entries({"\u202A":"U+202A","\u202B":"U+202B","\u202C":"U+202C","\u202D":"U+202D","\u202E":"U+202E","\u2066":"U+2066","\u2067":"U+2067","\u2068":"U+2068","\u2069":"U+2069","\uDB40\uDC01":"U+E0001","\uDB40\uDC7F":"U+E007F"}));function t(e){return`<span class="hidden-unicode-replacement" data-code-text="${e}"></span>`}function o(e){return e.split(s)}function c(e){return u(e)?e.replaceAll(r,e=>a.get(e)??""):e}function u(e){return l.test(e)}function d(e){return a.get(e)}}}]);
//# sourceMappingURL=55694-470f162df43f13cb-550dfd083bb492c5.js.map