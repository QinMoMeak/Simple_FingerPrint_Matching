"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4429],{14980:(e,r,t)=>{function n(e){let r=e.split("::")[0].split("/");return r.length>=5?r.slice(2,-1).join("/"):""}t.d(r,{C5:()=>n,Nt:()=>i,Uf:()=>a});let a=e=>Array.isArray(e),i=e=>{let r=e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").slice(0,30).replace(/-+$/,""),t=crypto.randomUUID();return"".concat(r,"_").concat(t)}},45348:(e,r,t)=>{t.d(r,{D:()=>a});var n=t(82494);let a={MULTIHOP:{name:"query_answer_multihop",engine_id:"multihop_faster",url:"".concat(n.H,"/ada/query"),stream:!0},AGENT:{name:"query_answer_agent",engine_id:"agent",url:"".concat(n.H,"/ada/query"),stream:!0},CODEMAP:{name:"query_answer_codemaps",engine_id:"codemap",url:"".concat(n.H,"/ada/query"),stream:!0}}},50625:(e,r,t)=>{t.d(r,{Mc:()=>p,d_:()=>m});var n=t(90650),a=t(7158),i=t(22016),o=t(78204),c=t.n(o),s=t(7620),d=t(69885),u=t(29098),l=t(82494),y=t(71165);function p(){let e=(0,n.jE)();return(0,s.useCallback)(async r=>{let t=y.j.queryItem(r.queryId).queryKey;e.setQueryData(t,e=>(void 0===e&&(e={queries:[],title:r.query}),(0,a.jM)(e,e=>{e.queries.push({repo_names:r.repoNames,user_query:r.query,response:[],state:"pending",error:null,engine_id:r.queryDefinition.engine_id,redis_stream:null})}))),(0,u.sx)(u.lA.QUERY_SENT,{engine_id:r.queryDefinition.engine_id,mode:"codemap"===r.queryDefinition.engine_id?"codemap":"agent"===r.queryDefinition.engine_id?"deep":"fast"}),i.Ay.post("".concat(l.H,"/ada/query"),{json:{engine_id:r.queryDefinition.engine_id,user_query:r.query,keywords:[],repo_names:r.repoNames,additional_context:"",query_id:r.queryId,use_notes:!1,attached_context:r.attachedContext,generate_summary:r.generateSummary},keepalive:!0}).then(()=>{e.invalidateQueries({queryKey:t})}).catch(async e=>{var r;console.error("Failed to run Ada query:",e),(null==e||null==(r=e.response)?void 0:r.status)===422?d.oR.error("No repositories indexed for this organization. Configure repository indexing to enable search."):d.oR.error("Failed to run Ada query")})},[e])}function m(e){return(0,s.useMemo)(()=>c().throttle(()=>{i.Ay.post("".concat(l.H,"/ada/warm_public_repo"),{searchParams:{repo_name:e}})},6e5,{leading:!0,trailing:!1}),[e])}},71165:(e,r,t)=>{t.d(r,{j:()=>c});var n=t(57422),a=t(7158),i=t(22016),o=t(82494);let c={queriesListKey:["ada-query"],queryItemKey:e=>[...c.queriesListKey,e],queryItem:e=>(0,n.j)({queryKey:c.queryItemKey(e),queryFn:async r=>{let{queryKey:t,client:n,signal:c}=r,s=await i.Ay.get("".concat(o.H,"/ada/query/").concat(e)).json();if(0===s.queries.length)throw Error("Query not yet ready");if("pending"!==s.queries[s.queries.length-1].state)return s;n.setQueryData(t,()=>s);let d=new URL("".concat(o.H.replace("http","ws"),"/ada/ws/query/").concat(e));return await new Promise((e,r)=>{let i,o=new WebSocket(d.toString()),s=!0,u=-1,l=!1;o.addEventListener("message",r=>{if(l)return;let o=JSON.parse(r.data);if(s){if(i=o,n.setQueryData(t,()=>i),s=!1,-1===(u=i.queries.findIndex(e=>"pending"===e.redis_stream))){l=!0,e(i);return}}else{if("done"==o.type){i=(0,a.jM)(i,e=>{e.queries[u].state="done"}),l=!0,e(i);return}i=(0,a.jM)(i,e=>{e.queries[u].response.push(o)}),n.setQueryData(t,()=>i)}},{signal:c}),o.addEventListener("error",()=>{l||r("Connection lost")},{signal:c}),o.addEventListener("close",()=>{l||r("Connection lost")},{signal:c})})},enabled:!0,refetchInterval:!1,staleTime:1/0,retry:3})}},74305:(e,r,t)=>{t.d(r,{e:()=>a});let n=null,a=async()=>{let e="6LeK1G0rAAAAAGVDKn-92dkphJzZvEobSLCyZJg4";if(e)try{return await (n||(window.grecaptcha&&"function"==typeof window.grecaptcha.ready?Promise.resolve():n=new Promise((e,r)=>{let t;if(document.querySelector('script[src*="recaptcha/api.js"]')){let r=()=>{window.grecaptcha&&"function"==typeof window.grecaptcha.ready?e():setTimeout(r,50)};r();return}let a=document.createElement("script");a.src="https://www.google.com/recaptcha/api.js?render=explicit",a.async=!0,a.defer=!0;let i=()=>{t&&clearTimeout(t)};a.onload=()=>{let r=()=>{window.grecaptcha&&"function"==typeof window.grecaptcha.ready?(i(),e()):t=setTimeout(r,50)};r()},a.onerror=()=>{i(),n=null,r(Error("Failed to load reCAPTCHA script"))},setTimeout(()=>{i(),n=null,r(Error("reCAPTCHA script loading timeout"))},1e4),document.head.appendChild(a)}))),new Promise((r,t)=>{if(!window.grecaptcha||"function"!=typeof window.grecaptcha.ready)return void t(Error("reCAPTCHA not available after script load"));let n=setTimeout(()=>{t(Error("reCAPTCHA execution timeout"))},3e4);window.grecaptcha.ready(()=>{let a=document.createElement("div");a.style.display="none",document.body.appendChild(a);try{let t=window.grecaptcha.render(a,{sitekey:e,callback:e=>{clearTimeout(n),document.body.contains(a)&&document.body.removeChild(a),r(e)},size:"invisible"});window.grecaptcha.execute(t)}catch(e){clearTimeout(n),document.body.contains(a)&&document.body.removeChild(a),t(e)}})})}catch(e){throw Error("reCAPTCHA execution failed: ".concat(e))}}}}]);