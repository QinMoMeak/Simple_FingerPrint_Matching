"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9437],{49437:(e,s,t)=>{t.d(s,{default:()=>b});var a=t(54568),l=t(6596),r=t(50297),n=t(97612),i=t(68727),d=t(32536),c=t(27541),o=t(90019),m=t(7620),x=t(38521),u=t(25703),h=t(27296),f=t(82494),p=t(74305),g=t(29098);function b(e){let s,{repoName:t}=e,n=(0,c.useRouter)(),[i,d]=(0,m.useState)(""),[b,w]=(0,m.useState)(!1),[N,v]=(0,m.useState)(""),[y,_]=(0,m.useState)(!1),[k,E]=(0,m.useState)(!1),[I,S]=(0,m.useState)(!0),[q,z]=(0,m.useState)(null),[D,R]=(0,m.useState)("unknown"),[T,P]=(0,m.useState)(void 0);(0,m.useEffect)(()=>{!async function(){try{S(!0);let e=new o.Eg,[s,a]=t.split("/");try{let{data:l}=await e.rest.repos.get({owner:s,repo:a});if(l.full_name!==t){console.log("Redirecting from ".concat(t," to ").concat(l.full_name)),n.replace("/".concat(l.full_name));return}if(["bablr-lang/","lingodotdev/","imsnif/bandwhich","imsnif/diskonaut","zellij-org/zellij","xxpq/tata","tinymce/tinymce-docs","rushilvishwakarma/Blaze-Convert","Xe/","TecharoHQ/","John-Selvinraj/hero-marketer","KarenHuang0421/test-fet-taoyuan-health","Obvius-Robotics/"].some(e=>l.full_name.startsWith(e)))throw console.log("Repository ".concat(l.full_name," is blocked")),Error("Repository is blocked");z({name:l.name,full_name:l.full_name,description:l.description||"",url:l.html_url,created_at:l.created_at,pushed_at:l.pushed_at,stargazers_count:l.stargazers_count,language:l.language||"",avatar_url:l.owner.avatar_url}),E(!1),await A()}catch(e){console.error("Error fetching from GitHub API:",e),E(!0)}}catch(e){console.error("Error checking repo status:",e),E(!0)}finally{S(!1)}}()},[t,n]),(0,m.useEffect)(()=>{let e;return("queued"===D||"indexing"===D)&&(console.log("starting poll every 30 seconds"),e=setInterval(()=>{A()},3e4)),()=>{e&&clearInterval(e)}},[D,t]);let A=async()=>{try{let e=await fetch("".concat(f.H,"/ada/public_repo_indexing_status?repo_name=").concat(encodeURIComponent(t)));if(e.ok){let s=await e.json(),t=s.status;if("completed"===t&&("queued"==D||"indexing"==D))return void window.location.reload();R(t),P(s.position),("indexing"===t||"queued"===t)&&_(!0)}}catch(e){console.error("Error checking indexing status:",e)}},C=async e=>{if(e.preventDefault(),!i)return void v("Email is required");(0,g.sx)(g.lA.NOT_INDEXED_EMAIL_SUBMIT,{email:i}),v(""),w(!0);try{let e=await (0,p.e)(),s=new URLSearchParams;s.append("repo_name",t),s.append("email_to_notify",i),e&&s.append("recaptcha_token",e);let a=await fetch("".concat(f.H,"/ada/index_public_repo?").concat(s.toString()),{method:"POST"});if(!a.ok)if(404===a.status)throw Error("Repository not found");else throw Error("Error ".concat(a.status,": ").concat(await a.text()));await a.json(),(0,g.sx)(g.lA.INDEX_REPO_SUBMIT,{repoName:t}),_(!0),await A()}catch(e){v(e instanceof Error?e.message:"An unknown error occurred")}finally{w(!1)}};return s=I?(0,a.jsxs)("div",{className:"flex w-full max-w-2xl flex-col items-start",children:[(0,a.jsx)("div",{className:"bg-secondary mb-8 w-full overflow-hidden rounded-lg shadow-lg",children:(0,a.jsxs)("div",{className:"p-3 sm:p-5",children:[(0,a.jsxs)("div",{className:"mb-5 flex flex-col items-center gap-3 sm:flex-row sm:gap-4",children:[(0,a.jsx)("div",{className:"h-12 w-12 flex-shrink-0 animate-pulse rounded-full bg-[#d0d0d0] dark:bg-[#333333]"}),(0,a.jsxs)("div",{className:"flex-grow text-center sm:text-left",children:[(0,a.jsx)("div",{className:"mb-2 h-7 w-48 animate-pulse rounded-md bg-[#d0d0d0] dark:bg-[#333333]"}),(0,a.jsx)("div",{className:"h-4 w-32 animate-pulse rounded-md bg-[#d0d0d0] dark:bg-[#333333]"})]})]}),(0,a.jsx)("div",{className:"mb-5 h-4 w-3/4 animate-pulse rounded-md bg-[#d0d0d0] dark:bg-[#333333]"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-4",children:[(0,a.jsx)("div",{className:"h-5 w-24 animate-pulse rounded-full bg-[#d0d0d0] sm:h-6 dark:bg-[#333333]"}),(0,a.jsx)("div",{className:"h-5 w-24 animate-pulse rounded-full bg-[#d0d0d0] sm:h-6 dark:bg-[#333333]"}),(0,a.jsx)("div",{className:"h-5 w-32 animate-pulse rounded-full bg-[#d0d0d0] sm:h-6 dark:bg-[#333333]"})]})]})}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"mb-6 text-left",children:[(0,a.jsx)("div",{className:"mb-3 h-7 w-64 animate-pulse rounded-md bg-[#d0d0d0] sm:h-8 dark:bg-[#333333]"}),(0,a.jsx)("div",{className:"mb-2 h-4 w-full animate-pulse rounded-md bg-[#d0d0d0] dark:bg-[#333333]"}),(0,a.jsx)("div",{className:"h-4 w-3/4 animate-pulse rounded-md bg-[#d0d0d0] dark:bg-[#333333]"})]})})]}):k?(0,a.jsx)("div",{className:"flex w-full max-w-2xl flex-col items-start",children:(0,a.jsxs)("div",{className:"mb-8 w-full",children:[(0,a.jsxs)("h1",{className:"mb-4 text-3xl font-light text-white",children:["Index your code with"," ",(0,a.jsxs)("span",{className:"inline-flex items-center whitespace-nowrap",children:[(0,a.jsx)(x.Y,{className:"mx-1 hidden h-8 w-8 sm:block",animate:!1,paletteType:"cool"}),"Devin"]})]}),(0,a.jsx)("p",{className:"mb-6 text-lg",children:"Private DeepWikis are only visible to you."}),(0,a.jsxs)("ul",{className:"text-primary mb-8 list-disc space-y-2 pl-6",children:[(0,a.jsx)("li",{children:"Free for your entire team, no payment required"}),(0,a.jsx)("li",{children:"Wiki and search across your GitHub and GitLab repos"}),(0,a.jsx)("li",{children:"Buy credits to use Devin, the AI software engineering agent"})]}),(0,a.jsxs)("a",{href:"".concat(f.K,"/signup?from=deepwiki&utm_source=deepwiki&utm_medium=not-indexed"),target:"_blank",rel:"noopener noreferrer",onClick:()=>(0,g.sx)(g.lA.NOT_INDEXED_SIGN_UP),className:"group flex items-center gap-2 rounded-md bg-blue-500 px-5 py-2.5 text-sm font-medium !text-white shadow-sm transition-all hover:bg-blue-600 hover:shadow-md dark:bg-blue-900 dark:hover:bg-blue-800",children:[(0,a.jsx)("span",{children:"Sign up"}),(0,a.jsx)(l.Q,{className:"h-4 w-4 transition-transform group-hover:translate-x-0.5",weight:"bold"})]})]})}):y||"indexing"===D||"queued"===D?(0,a.jsxs)("div",{className:"flex w-full max-w-2xl flex-col items-start",children:[q&&(0,a.jsx)(j,{repoInfo:q,repoName:t}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-6 text-left",children:[(0,a.jsx)("h1",{className:"mb-3 text-xl text-white sm:text-3xl",children:"Indexing in Progress"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"The indexing process typically takes 2-10 minutes to complete"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"size-2 animate-pulse rounded-full bg-blue-500"}),(0,a.jsx)("p",{className:"text-sm sm:text-base",children:"queued"===D?"Your repository is queued for indexing."+(T?" You are number ".concat(T," in the queue."):""):"Your repository is currently being indexed"})]}),i&&(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex size-5 items-center justify-center rounded-full bg-[#e0e0e0] dark:bg-[#2a2a2a]",children:(0,a.jsx)("span",{className:"text-xs",children:"✓"})}),(0,a.jsxs)("p",{className:"text-muted-foreground text-sm",children:["We'll notify you at ",i," once indexing is complete"]})]})]})]})]}):"failed"===D?(0,a.jsxs)("div",{className:"flex w-full max-w-2xl flex-col items-start",children:[q&&(0,a.jsx)(j,{repoInfo:q,repoName:t}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-6 text-left",children:[(0,a.jsx)("h1",{className:"mb-3 text-xl text-white sm:text-3xl",children:"Indexing Failed"}),(0,a.jsx)("p",{className:"text-sm sm:text-base",children:"There was a problem indexing this repository. Please try again."})]}),N&&(0,a.jsx)("div",{className:"mb-6 rounded-md bg-red-900/30 p-4 text-left text-sm text-red-400",children:N}),(0,a.jsxs)("form",{onSubmit:C,className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex flex-1 items-center overflow-hidden rounded-md border border-[#353535] bg-transparent",children:(0,a.jsx)("input",{id:"email",type:"email",value:i,onChange:e=>d(e.target.value),placeholder:"Email to notify (required)",className:"h-12 w-full border-none bg-transparent px-4 py-2 text-sm text-white focus:outline-none",required:!0})}),(0,a.jsx)("button",{type:"submit",disabled:b||!i,className:"h-12 flex-none rounded-md bg-blue-500 px-3 text-sm font-medium text-white shadow-md transition-all hover:bg-blue-600 disabled:cursor-not-allowed disabled:opacity-50",children:b?"Processing...":"Try Again"})]}),(0,a.jsx)("div",{className:"mt-6 border-t border-[#2a2a2a] pt-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-3 flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-[#e0e0e0] dark:bg-[#2a2a2a]",children:(0,a.jsx)(r.Z,{size:18,className:"text-blue-400"})}),(0,a.jsx)("p",{className:"text-sm",children:"Once indexed, you'll have full access to code exploration and search functionality"})]})})]})]}):(0,a.jsxs)("div",{className:"flex w-full max-w-2xl flex-col items-start",children:[q&&(0,a.jsx)(j,{repoInfo:q,repoName:t}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-6 text-left",children:[(0,a.jsx)("h1",{className:"mb-3 text-xl text-white sm:text-3xl",children:"Repository Not Indexed"}),(0,a.jsx)("p",{className:"text-sm sm:text-base",children:"This repository hasn't been indexed yet. Indexing allows you to explore code structure, find documentation, and understand dependencies."}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2 text-sm",children:"Indexing typically takes 2-10 minutes to complete after it starts indexing"})]}),N&&(0,a.jsx)("div",{className:"mb-6 rounded-md bg-red-900/30 p-4 text-left text-sm text-red-400",children:N}),(0,a.jsxs)("form",{onSubmit:C,className:"flex flex-col gap-3",children:[(0,a.jsx)("div",{className:"flex w-full items-center overflow-hidden rounded-md border border-[#e0e0e0] bg-transparent dark:border-[#353535]",children:(0,a.jsx)("input",{id:"email",type:"email",value:i,onChange:e=>d(e.target.value),placeholder:"Email to notify (required)",className:"text-foreground h-12 w-full border-none bg-transparent px-4 py-2 text-sm focus:outline-none",required:!0})}),(0,a.jsx)("button",{type:"submit",disabled:b||!i,className:(0,u.cn)(h.J,"inline-flex h-14 w-full items-center justify-center px-3 font-semibold shadow-md",b&&"cursor-not-allowed opacity-50"),children:b?"Processing...":"Index Repository"})]}),(0,a.jsx)("div",{className:"mt-6 border-t border-[#e0e0e0] pt-6 dark:border-[#353535]",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-3 flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-[#e0e0e0] dark:bg-[#353535]",children:(0,a.jsx)(r.Z,{size:18,className:"text-blue-400"})}),(0,a.jsx)("p",{className:"text-sm",children:"Once indexed, you'll have full access to code exploration and search functionality"})]})})]})]}),(0,a.jsx)("div",{className:"container-wrapper flex-1",children:(0,a.jsx)("div",{className:"container flex flex-col items-center justify-center gap-8 px-4 py-8",children:s})})}function j(e){let{repoInfo:s,repoName:t}=e;return(0,a.jsx)("div",{className:"bg-secondary mb-8 w-full overflow-hidden rounded-lg shadow-lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center p-3 sm:items-start sm:p-5",children:[(0,a.jsxs)("div",{className:"mb-5 flex flex-col items-center gap-3 sm:flex-row sm:gap-4",children:[s.avatar_url&&(0,a.jsx)("div",{className:"relative h-12 w-12 flex-shrink-0 overflow-hidden rounded-full border border-[#333333]",children:(0,a.jsx)(d.default,{src:s.avatar_url,alt:"".concat(t," owner avatar"),fill:!0,style:{objectFit:"cover"},priority:!0})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h2",{className:"text-center text-xl font-medium text-white sm:text-left sm:text-2xl",children:s.name}),(0,a.jsxs)("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-blue-400 hover:underline",children:[s.full_name,(0,a.jsx)(n.F,{className:"h-3 w-3"})]})]})]}),s.description&&(0,a.jsx)("p",{className:"mb-5 text-center text-sm sm:text-left",children:s.description}),(0,a.jsxs)("div",{className:"text-muted-foreground flex w-fit flex-wrap gap-2 text-xs sm:gap-4 sm:text-sm",children:[s.stargazers_count>0&&(0,a.jsxs)("div",{className:"bg-component flex items-center gap-2 rounded-full px-2 py-1",children:[(0,a.jsx)(i.F,{weight:"fill",className:"h-4 w-4 text-yellow-400"}),(0,a.jsxs)("span",{children:[s.stargazers_count>1e3?"".concat((s.stargazers_count/1e3).toFixed(1),"k"):s.stargazers_count," ","stars"]})]}),s.language&&(0,a.jsxs)("div",{className:"bg-component flex items-center gap-2 rounded-full px-2 py-1",children:[(0,a.jsx)("span",{className:"h-3 w-3 rounded-full bg-blue-400"}),(0,a.jsx)("span",{children:s.language})]}),(0,a.jsx)("div",{className:"bg-component flex items-center gap-2 rounded-full px-2 py-1",children:(0,a.jsxs)("span",{children:["Updated: ",w(s.pushed_at)]})})]})]})})}let w=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}}]);